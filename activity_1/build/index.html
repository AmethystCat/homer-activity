<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="apple-touch-fullscreen" content="yes">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="format-detection" content="telephone=no">
	<meta name="x5-fullscreen" content="true">
	<meta name="description" content="开启您的贵宾生活新选择。"/>
	<title>荷马生活家</title>
	<link rel="shortcut icon" href="https://www.homer.com.cn/images/favicon.ico" type="image/x-icon" />
	<title>homer-注册分享</title>
	<link rel="stylesheet" href="/css/style.css">
</head>
<body>
	<div class="container">
		<div class="section-page section-page-1 page-active">
			<img src="/images/1_1.png" alt="banner">
			<button type="button" class="btn btn-border btn-goRegist">立即注册</button>
			<a class="intro-link" href="https://prod.homer.com.cn/api/banner/lock/introduce/popularize">了解更多智能锁介绍</a>
		</div>
		<div class="section-page section-page-2 page-next">
			<img src="/images/logo.png" alt="荷马智能锁，开启硬件免费新时代！" class="logo">	
			<form class="form" id="form">
				<div class="form-item invite-w">
					<div class="code-tip">
						<span>邀请码：</span>
						<span class="invite-code">123321</span>
					</div>
					<div class="tip">
						132****1332 邀请您加入荷马生活!
					</div>
				</div>
				<div class="form-item input-w mobile-w">
					<input type="tel" id="mobile" placeholder="请输入您的手机号">
				</div>
				<div class="form-item input-w authCode-w">
					<input type="tel" id="auth-code" placeholder="请输入验证码">
					<button type="button" class="btn btn-getCode">获取验证码</button>
				</div>
				<div class="form-item input-w pass-w">
					<input type="password" id="password" placeholder="请输入密码">
					<button type="button" title="eyes" class="btn btn-eye"><i class="sprite sprite-eye_close"></i></button>
				</div>
				<div class="form-item check-w agreement-w">
					<label for="agree">
						<input type="checkbox" id="isAgree" checked="checked">
						同意注册协议
					</label>
				</div>
				<button type="button" class="btn btn-red btn-regist">注 册</button>
				<a class="intro-link" href="https://prod.homer.com.cn/api/banner/lock/introduce/popularize">了解更多智能锁介绍</a>
			</form>
		</div>
		<div class="section-page section-page-3 page-next">
			<img class="logo-emoji" src="/images/emoji.png" alt="Homer">
			<p>恭喜您已经成功注册荷马生活</p>
			<p>下载荷马生活APP，领取属于您的荷马智能锁</p>
			<button type="button" class="btn btn-operate" id="btn-op">立即打开荷马生活 ></button>
		</div>
	</div>
</body>
<script>
	!function(a,b){function c(){var b=f.getBoundingClientRect().width;b/i>540&&(b=540*i);var c=b/10;f.style.fontSize=c+"px",k.rem=a.rem=c}var d,e=a.document,f=e.documentElement,g=e.querySelector('meta[name="viewport"]'),h=e.querySelector('meta[name="flexible"]'),i=0,j=0,k=b.flexible||(b.flexible={});if(g){console.warn("将根据已有的meta标签来设置缩放比例");var l=g.getAttribute("content").match(/initial\-scale=([\d\.]+)/);l&&(j=parseFloat(l[1]),i=parseInt(1/j))}else if(h){var m=h.getAttribute("content");if(m){var n=m.match(/initial\-dpr=([\d\.]+)/),o=m.match(/maximum\-dpr=([\d\.]+)/);n&&(i=parseFloat(n[1]),j=parseFloat((1/i).toFixed(2))),o&&(i=parseFloat(o[1]),j=parseFloat((1/i).toFixed(2)))}}if(!i&&!j){var p=a.navigator.userAgent,q=(!!p.match(/android/gi),!!p.match(/iphone/gi)),r=q&&!!p.match(/OS 9_3/),s=a.devicePixelRatio;i=q&&!r?s>=3&&(!i||i>=3)?3:s>=2&&(!i||i>=2)?2:1:1,j=1/i}if(f.setAttribute("data-dpr",i),!g)if(g=e.createElement("meta"),g.setAttribute("name","viewport"),g.setAttribute("content","initial-scale="+j+", maximum-scale="+j+", minimum-scale="+j+", user-scalable=no"),f.firstElementChild)f.firstElementChild.appendChild(g);else{var t=e.createElement("div");t.appendChild(g),e.write(t.innerHTML)}a.addEventListener("resize",function(){clearTimeout(d),d=setTimeout(c,300)},!1),a.addEventListener("pageshow",function(a){a.persisted&&(clearTimeout(d),d=setTimeout(c,300))},!1),"complete"===e.readyState?e.body.style.fontSize=12*i+"px":e.addEventListener("DOMContentLoaded",function(){e.body.style.fontSize=12*i+"px"},!1),c(),k.dpr=a.dpr=i,k.refreshRem=c,k.rem2px=function(a){var b=parseFloat(a)*this.rem;return"string"==typeof a&&a.match(/rem$/)&&(b+="px"),b},k.px2rem=function(a){var b=parseFloat(a)/this.rem;return"string"==typeof a&&a.match(/px$/)&&(b+="rem"),b}}(window,window.lib||(window.lib={}));
</script>
<script src="/js/zepto.min.js"></script>
<script>
	$(function() {
		// 若hash=success,则直接显示成功页面
		var hash = window.location.href.split('#')[1];
		if (hash === 'success') {
			$('.section-page-3')
				.addClass('page-active')
				.removeClass('page-next')
				.siblings('.section-page')
				.removeClass('page-active page-next')
				.addClass('page-prev');
		} else if (hash === 'regist') {
			$('.section-page-2')
				.addClass('page-active')
				.removeClass('page-next')
				.siblings('.section-page-1')
				.removeClass('page-active')
				.addClass('page-prev');
		}

		/*which transitionevent*/
		function whichTransition() {
			var t,
			      el = document.body,
			      transitions = {
			      	'transition':'transitionend',
				'WebkitTransition':'webkitTransitionEnd'
			      };
			for (t in transitions) {
				if (el.style[t] !== undefined) {
					return transitions[t];
				}
			}
		}
		var transend = whichTransition();

		 /*page transition*/
		function slideOver() {
		 	$('.page-in').off().on(transend, function() {
		 		$(this).removeClass('page-in');
		 	});
		 	$('.page-out').off().on(transend, function() {
		 		$(this).removeClass('page-out');
		 	})
		}
		function to2() {
			$('.section-page-1')
		 		.removeClass('page-active')
		 		.addClass('page-out page-prev');
		 	$('.section-page-2')
		 		.removeClass('page-next')
		 		.addClass('page-in page-active');
		 	slideOver();
		}
		function to3() {
			$('.section-page-2')
		 		.removeClass('page-active')
		 		.addClass('page-out page-prev');
		 	$('.section-page-3')
		 		.removeClass('page-next')
		 		.addClass('page-in page-active');
		 	slideOver();
		}

		/*倒计时*/
		function counter(el, s) {
			var count = s || 10;
			var timer = setInterval(function() {
				count > 0 ? (el.text((count--)+'秒后重发'), el.attr('disabled', true)) : (clearInterval(timer), el.text('获取验证码'), el.removeAttr('disabled'));
			}, 1000);
			return {
				recover: function() {
					clearInterval(timer);
				}
			}
		}

		$('.btn-getCode').on('click', function() {
			var _this = this;
			var count = counter($(this), 60);
			
		});

		$('.btn-goRegist').click(function(){
			history.pushState({'page': 2}, '', '#regist');
		 	to2();
		});

		$('.btn-regist').click(function(){
			history.pushState({'page': 3}, '', '#success');
		 	to3();
		});

		$('.sprite-eye_close').on('click', function() {
			if ($(this).hasClass('sprite-eye_close')) {
				$(this)
				    .addClass('sprite-eye_open')
				    .removeClass('sprite-eye_close')
				    .parent().siblings('input').attr('type', 'text')
			} else {
				$(this)
				    .addClass('sprite-eye_close')
				    .removeClass('sprite-eye_open')
				    .parent().siblings('input').attr('type', 'password')
			}
		});

		$('#btn-op').on('click', function(e) {
			window.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=cn.com.homer.eu";
		});

		$(window).on('popstate', function(e) {
			console.log(e.state);
		});
	});
</script>
</html>